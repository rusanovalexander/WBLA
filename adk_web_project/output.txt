(.venv) C:\Users\GV20FI\Documents\Mode Development\AI in WB lending process\Project Omni\WBLA-feature-adk-web-migration\adk_web_project>python -m google.adk.cli web --port 8000
2026-02-18 10:25:50,629 - INFO - service_factory.py:266 - Using in-memory memory service
2026-02-18 10:25:50,629 - INFO - local_storage.py:84 - Using per-agent session storage rooted at C:\Users\GV20FI\Documents\Mode Development\AI in WB lending process\Project Omni\WBLA-feature-adk-web-migration\adk_web_project
2026-02-18 10:25:50,631 - INFO - local_storage.py:110 - Using file artifact service at C:\Users\GV20FI\Documents\Mode Development\AI in WB lending process\Project Omni\WBLA-feature-adk-web-migration\adk_web_project\.adk\artifacts
C:\Users\GV20FI\Documents\Mode Development\AI in WB lending process\Project Omni\WBLA-feature-adk-web-migration\adk_web_project\.venv\Lib\site-packages\google\adk\cli\fast_api.py:142: UserWarning: [EXPERIMENTAL] InMemoryCredentialService: This feature is experimental and may change or be removed in future versions without notice. It may introduce breaking changes at any time.
  credential_service = InMemoryCredentialService()
C:\Users\GV20FI\Documents\Mode Development\AI in WB lending process\Project Omni\WBLA-feature-adk-web-migration\adk_web_project\.venv\Lib\site-packages\google\adk\auth\credential_service\in_memory_credential_service.py:33: UserWarning: [EXPERIMENTAL] BaseCredentialService: This feature is experimental and may change or be removed in future versions without notice. It may introduce breaking changes at any time.
  super().__init__()
INFO:     Started server process [21728]
INFO:     Waiting for application startup.

+-----------------------------------------------------------------------------+
| ADK Web Server started                                                      |
|                                                                             |
| For local testing, access at http://127.0.0.1:8000.                         |
+-----------------------------------------------------------------------------+

INFO:     Application startup complete.
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     127.0.0.1:59384 - "GET / HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:59384 - "GET /dev-ui/assets/config/runtime-config.json HTTP/1.1" 200 OK
INFO:     127.0.0.1:59384 - "GET /list-apps?relative_path=./ HTTP/1.1" 200 OK
2026-02-18 10:26:09,189 - INFO - local_storage.py:60 - Creating local session service at C:\Users\GV20FI\Documents\Mode Development\AI in WB lending process\Project Omni\WBLA-feature-adk-web-migration\adk_web_project\adk_credit_pack\.adk\session.db
INFO:     127.0.0.1:61132 - "GET /builder/app/adk_credit_pack?ts=1771406769158 HTTP/1.1" 200 OK
2026-02-18 10:26:09,217 - INFO - adk_web_server.py:665 - New session created: d4dc47ce-f772-45cd-8297-1c6294880fa8
INFO:     127.0.0.1:59384 - "POST /apps/adk_credit_pack/users/user/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59384 - "GET /apps/adk_credit_pack/users/user/sessions/d4dc47ce-f772-45cd-8297-1c6294880fa8 HTTP/1.1" 200 OK
INFO:     127.0.0.1:59384 - "GET /debug/trace/session/d4dc47ce-f772-45cd-8297-1c6294880fa8 HTTP/1.1" 200 OK
INFO:     127.0.0.1:61132 - "GET /debug/trace/session/d4dc47ce-f772-45cd-8297-1c6294880fa8 HTTP/1.1" 200 OK
INFO:     127.0.0.1:61132 - "GET /apps/adk_credit_pack/users/user/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:61132 - "GET /apps/adk_credit_pack/eval_sets HTTP/1.1" 200 OK
INFO:     127.0.0.1:59384 - "GET /apps/adk_credit_pack/eval_results HTTP/1.1" 200 OK
INFO:     127.0.0.1:59384 - "GET /apps/adk_credit_pack/users/user/sessions HTTP/1.1" 200 OK
INFO:     127.0.0.1:59384 - "POST /run_sse HTTP/1.1" 200 OK
2026-02-18 10:26:12,451 - INFO - envs.py:83 - Loaded .env file for adk_credit_pack at C:\Users\GV20FI\Documents\Mode Development\AI in WB lending process\Project Omni\WBLA-feature-adk-web-migration\adk_web_project\.env
2026-02-18 10:26:12,459 - INFO - envs.py:83 - Loaded .env file for adk_credit_pack at C:\Users\GV20FI\Documents\Mode Development\AI in WB lending process\Project Omni\WBLA-feature-adk-web-migration\adk_web_project\.env
2026-02-18 10:26:13,785 - INFO - _api_client.py:640 - The project/location from the environment variables will take precedence over the API key from the environment variables.
2026-02-18 10:26:15,366 - INFO - google_llm.py:185 - Sending out request, model: gemini-2.5-pro, backend: GoogleLLMVariant.VERTEX_AI, stream: False
2026-02-18 10:26:19,644 - INFO - _client.py:1740 - HTTP Request: POST https://us-central1-aiplatform.googleapis.com/v1beta1/projects/gen-lang-client-0861988411/locations/us-central1/publishers/google/models/gemini-2.5-pro:generateContent "HTTP/1.1 200 OK"
2026-02-18 10:26:19,649 - INFO - google_llm.py:250 - Response received from the model.
INFO:     127.0.0.1:59384 - "GET /debug/trace/session/d4dc47ce-f772-45cd-8297-1c6294880fa8 HTTP/1.1" 200 OK
INFO:     127.0.0.1:49845 - "POST /run_sse HTTP/1.1" 200 OK
2026-02-18 10:26:35,058 - INFO - _api_client.py:640 - The project/location from the environment variables will take precedence over the API key from the environment variables.
2026-02-18 10:26:36,550 - INFO - google_llm.py:185 - Sending out request, model: gemini-2.5-pro, backend: GoogleLLMVariant.VERTEX_AI, stream: False
2026-02-18 10:26:39,819 - INFO - _client.py:1740 - HTTP Request: POST https://us-central1-aiplatform.googleapis.com/v1beta1/projects/gen-lang-client-0861988411/locations/us-central1/publishers/google/models/gemini-2.5-pro:generateContent "HTTP/1.1 200 OK"
2026-02-18 10:26:39,822 - INFO - google_llm.py:250 - Response received from the model.
INFO:     127.0.0.1:49845 - "GET /debug/trace/session/d4dc47ce-f772-45cd-8297-1c6294880fa8 HTTP/1.1" 200 OK
INFO:     127.0.0.1:57671 - "POST /run_sse HTTP/1.1" 200 OK
2026-02-18 10:26:49,378 - INFO - _api_client.py:640 - The project/location from the environment variables will take precedence over the API key from the environment variables.
2026-02-18 10:26:50,823 - INFO - google_llm.py:185 - Sending out request, model: gemini-2.5-pro, backend: GoogleLLMVariant.VERTEX_AI, stream: False
2026-02-18 10:32:05,969 - INFO - _client.py:1740 - HTTP Request: POST https://us-central1-aiplatform.googleapis.com/v1beta1/projects/gen-lang-client-0861988411/locations/us-central1/publishers/google/models/gemini-2.5-pro:generateContent "HTTP/1.1 200 OK"
2026-02-18 10:32:06,085 - INFO - google_llm.py:250 - Response received from the model.
2026-02-18 10:32:06,087 - WARNING - types.py:6816 - Warning: there are non-text parts in the response: ['function_call'], returning concatenated text result from text parts. Check the full candidates.content.parts accessor to get the full model response.
2026-02-18 10:32:06,172 - INFO - _api_client.py:640 - The project/location from the environment variables will take precedence over the API key from the environment variables.
2026-02-18 10:32:07,653 - INFO - google_llm.py:185 - Sending out request, model: gemini-2.5-pro, backend: GoogleLLMVariant.VERTEX_AI, stream: False
2026-02-18 10:32:11,595 - INFO - _client.py:1740 - HTTP Request: POST https://us-central1-aiplatform.googleapis.com/v1beta1/projects/gen-lang-client-0861988411/locations/us-central1/publishers/google/models/gemini-2.5-pro:generateContent "HTTP/1.1 200 OK"
2026-02-18 10:32:11,603 - INFO - google_llm.py:250 - Response received from the model.
2026-02-18 10:32:12,784 - INFO - rag_search.py:436 - search_rag: query='information requirements assessment methods origination' → 2 results (2 with content)
2026-02-18 10:32:12,981 - INFO - rag_search.py:436 - search_rag: query='required sections content structure output document' → 1 results (1 with content)
2026-02-18 10:32:13,247 - INFO - rag_search.py:436 - search_rag: query='assessment approach types available decision criteria' → 2 results (2 with content)
2026-02-18 10:32:13,518 - INFO - rag_search.py:436 - search_rag: query='origination methods types available when each applies' → 2 results (2 with content)
2026-02-18 10:32:13,674 - INFO - rag_search.py:436 - search_rag: query='classification categories types dimensions taxonomy' → 0 results (0 with content)
2026-02-18 10:32:13,874 - INFO - rag_search.py:436 - search_rag: query='compliance criteria categories requirements' → 2 results (2 with content)
2026-02-18 10:32:14,080 - INFO - rag_search.py:436 - search_rag: query='risk categories risk assessment framework appetite' → 2 results (2 with content)
2026-02-18 10:32:14,283 - INFO - rag_search.py:436 - search_rag: query='financial ratio requirements thresholds limits covenants' → 2 results (2 with content)
2026-02-18 10:32:14,578 - INFO - rag_search.py:436 - search_rag: query='security collateral requirements structural provisions' → 2 results (2 with content)
2026-02-18 10:32:14,578 - INFO - governance_discovery.py:202 - GovernanceDiscovery PROCEDURE query='information requirements assessment methods origination' → status=OK, results=1, has_content=True
2026-02-18 10:32:14,578 - INFO - governance_discovery.py:202 - GovernanceDiscovery PROCEDURE query='required sections content structure output document' → status=OK, results=1, has_content=True
2026-02-18 10:32:14,578 - INFO - governance_discovery.py:202 - GovernanceDiscovery PROCEDURE query='assessment approach types available decision criteria' → status=OK, results=1, has_content=True
2026-02-18 10:32:14,578 - INFO - governance_discovery.py:202 - GovernanceDiscovery PROCEDURE query='origination methods types available when each applies' → status=OK, results=1, has_content=True
2026-02-18 10:32:14,578 - INFO - governance_discovery.py:202 - GovernanceDiscovery PROCEDURE query='classification categories types dimensions taxonomy' → status=OK, results=0, has_content=False
2026-02-18 10:32:14,578 - INFO - governance_discovery.py:214 - GovernanceDiscovery GUIDELINES query='compliance criteria categories requirements' → status=OK, results=1, has_content=True
2026-02-18 10:32:14,578 - INFO - governance_discovery.py:214 - GovernanceDiscovery GUIDELINES query='risk categories risk assessment framework appetite' → status=OK, results=1, has_content=True
2026-02-18 10:32:14,578 - INFO - governance_discovery.py:214 - GovernanceDiscovery GUIDELINES query='financial ratio requirements thresholds limits covenants' → status=OK, results=1, has_content=True
2026-02-18 10:32:14,578 - INFO - governance_discovery.py:214 - GovernanceDiscovery GUIDELINES query='security collateral requirements structural provisions' → status=OK, results=1, has_content=True
2026-02-18 10:32:14,578 - INFO - _api_client.py:633 - The user provided project/location will take precedence over the Vertex AI API key from the environment variable.
2026-02-18 10:32:16,078 - INFO - llm_client.py:52 - Created singleton genai.Client for project=gen-lang-client-0861988411
2026-02-18 10:32:16,078 - INFO - models.py:5466 - AFC is enabled with max remote calls: 10.
2026-02-18 10:32:51,645 - INFO - _client.py:1025 - HTTP Request: POST https://us-central1-aiplatform.googleapis.com/v1beta1/projects/gen-lang-client-0861988411/locations/us-central1/publishers/google/models/gemini-2.5-pro:generateContent "HTTP/1.1 200 OK"
2026-02-18 10:32:51,652 - INFO - parsers.py:314 - Successfully parsed JSON (6835 chars)
2026-02-18 10:32:51,652 - INFO - governance_discovery.py:293 - Governance discovery complete: 8 categories, 4 compliance, 4 risk, 16 vocab
2026-02-18 10:32:51,652 - INFO - models.py:5466 - AFC is enabled with max remote calls: 10.
2026-02-18 10:32:57,893 - INFO - _client.py:1025 - HTTP Request: POST https://us-central1-aiplatform.googleapis.com/v1beta1/projects/gen-lang-client-0861988411/locations/us-central1/publishers/google/models/gemini-2.5-flash:generateContent "HTTP/1.1 200 OK"
2026-02-18 10:32:57,895 - ERROR - llm_client.py:350 - LLM call failed for ProcessAnalyst: 1 validation error for LLMCallResult
text
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.12/v/string_type
Traceback (most recent call last):
  File "C:\Users\GV20FI\Documents\Mode Development\AI in WB lending process\Project Omni\WBLA-feature-adk-web-migration\core\llm_client.py", line 328, in call_llm
    return LLMCallResult(
           ^^^^^^^^^^^^^^
  File "C:\Users\GV20FI\Documents\Mode Development\AI in WB lending process\Project Omni\WBLA-feature-adk-web-migration\adk_web_project\.venv\Lib\site-packages\pydantic\main.py", line 250, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for LLMCallResult
text
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.12/v/string_type
2026-02-18 10:32:57,975 - ERROR - tools.py:84 - analyze_deal failed
Traceback (most recent call last):
  File "C:\Users\GV20FI\Documents\Mode Development\AI in WB lending process\Project Omni\WBLA-feature-adk-web-migration\adk_web_project\adk_credit_pack\tools.py", line 57, in analyze_deal
    result = await asyncio.to_thread(
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python312\Lib\asyncio\threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python312\Lib\concurrent\futures\thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\GV20FI\Documents\Mode Development\AI in WB lending process\Project Omni\WBLA-feature-adk-web-migration\agents\process_analyst.py", line 620, in analyze_deal
    raw = self._run_analysis_text_based(teaser_text, on_stream=on_stream)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\GV20FI\Documents\Mode Development\AI in WB lending process\Project Omni\WBLA-feature-adk-web-migration\agents\process_analyst.py", line 795, in _run_analysis_text_based
    planning = call_llm(
               ^^^^^^^^^
  File "C:\Users\GV20FI\Documents\Mode Development\AI in WB lending process\Project Omni\WBLA-feature-adk-web-migration\core\llm_client.py", line 278, in call_llm
    with tracer.trace_llm_call(agent_name, model, prompt) as ctx:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python312\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "C:\Users\GV20FI\Documents\Mode Development\AI in WB lending process\Project Omni\WBLA-feature-adk-web-migration\core\tracing\trace_store.py", line 164, in trace_llm_call
    tokens_out = ctx.get("tokens_out", 0) or estimate_tokens(ctx.get("response_text", ""))
                                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\GV20FI\Documents\Mode Development\AI in WB lending process\Project Omni\WBLA-feature-adk-web-migration\core\tracing\trace_store.py", line 48, in estimate_tokens
    return max(1, len(text) // 4)
                  ^^^^^^^^^
TypeError: object of type 'NoneType' has no len()
2026-02-18 10:32:58,124 - INFO - _api_client.py:640 - The project/location from the environment variables will take precedence over the API key from the environment variables.
2026-02-18 10:32:59,555 - INFO - google_llm.py:185 - Sending out request, model: gemini-2.5-pro, backend: GoogleLLMVariant.VERTEX_AI, stream: False
2026-02-18 10:33:08,953 - INFO - _client.py:1740 - HTTP Request: POST https://us-central1-aiplatform.googleapis.com/v1beta1/projects/gen-lang-client-0861988411/locations/us-central1/publishers/google/models/gemini-2.5-pro:generateContent "HTTP/1.1 200 OK"
2026-02-18 10:33:08,955 - INFO - google_llm.py:250 - Response received from the model.
2026-02-18 10:33:08,984 - INFO - models.py:5466 - AFC is enabled with max remote calls: 10.
2026-02-18 10:33:14,988 - INFO - _client.py:1025 - HTTP Request: POST https://us-central1-aiplatform.googleapis.com/v1beta1/projects/gen-lang-client-0861988411/locations/us-central1/publishers/google/models/gemini-2.5-flash:generateContent "HTTP/1.1 200 OK"
2026-02-18 10:33:14,994 - ERROR - llm_client.py:350 - LLM call failed for ProcessAnalyst: 1 validation error for LLMCallResult
text
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.12/v/string_type
Traceback (most recent call last):
  File "C:\Users\GV20FI\Documents\Mode Development\AI in WB lending process\Project Omni\WBLA-feature-adk-web-migration\core\llm_client.py", line 328, in call_llm
    return LLMCallResult(
           ^^^^^^^^^^^^^^
  File "C:\Users\GV20FI\Documents\Mode Development\AI in WB lending process\Project Omni\WBLA-feature-adk-web-migration\adk_web_project\.venv\Lib\site-packages\pydantic\main.py", line 250, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for LLMCallResult
text
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.12/v/string_type
2026-02-18 10:33:14,997 - ERROR - tools.py:84 - analyze_deal failed
Traceback (most recent call last):
  File "C:\Users\GV20FI\Documents\Mode Development\AI in WB lending process\Project Omni\WBLA-feature-adk-web-migration\adk_web_project\adk_credit_pack\tools.py", line 57, in analyze_deal
    result = await asyncio.to_thread(
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python312\Lib\asyncio\threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python312\Lib\concurrent\futures\thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\GV20FI\Documents\Mode Development\AI in WB lending process\Project Omni\WBLA-feature-adk-web-migration\agents\process_analyst.py", line 620, in analyze_deal
    raw = self._run_analysis_text_based(teaser_text, on_stream=on_stream)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\GV20FI\Documents\Mode Development\AI in WB lending process\Project Omni\WBLA-feature-adk-web-migration\agents\process_analyst.py", line 795, in _run_analysis_text_based
    planning = call_llm(
               ^^^^^^^^^
  File "C:\Users\GV20FI\Documents\Mode Development\AI in WB lending process\Project Omni\WBLA-feature-adk-web-migration\core\llm_client.py", line 278, in call_llm
    with tracer.trace_llm_call(agent_name, model, prompt) as ctx:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python312\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "C:\Users\GV20FI\Documents\Mode Development\AI in WB lending process\Project Omni\WBLA-feature-adk-web-migration\core\tracing\trace_store.py", line 164, in trace_llm_call
    tokens_out = ctx.get("tokens_out", 0) or estimate_tokens(ctx.get("response_text", ""))
                                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\GV20FI\Documents\Mode Development\AI in WB lending process\Project Omni\WBLA-feature-adk-web-migration\core\tracing\trace_store.py", line 48, in estimate_tokens
    return max(1, len(text) // 4)
                  ^^^^^^^^^
TypeError: object of type 'NoneType' has no len()
2026-02-18 10:33:15,035 - INFO - _api_client.py:640 - The project/location from the environment variables will take precedence over the API key from the environment variables.
2026-02-18 10:33:16,602 - INFO - google_llm.py:185 - Sending out request, model: gemini-2.5-pro, backend: GoogleLLMVariant.VERTEX_AI, stream: False
