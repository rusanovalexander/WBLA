All JSON parse attempts failed. Last error: Expecting ',' delimiter: line 9 column 54 (char 300). JSON string (first 300 chars): [
  {
    "category": "Loan Purpose Information",
    "fields": [
      {
        "id": 1,
        "name": "Final Loan Request Letter",
        "description": "Formal request from the borrower detailing the final loan amount, term, and purpose.",
        "why_required": "The deal analysis mentions '
All JSON parse attempts failed. Last error: Expecting ',' delimiter: line 9 column 54 (char 300). JSON string (first 300 chars): [
  {
    "category": "Loan Purpose Information",
    "fields": [
      {
        "id": 1,
        "name": "Final Loan Request Letter",
        "description": "Formal request from the borrower detailing the final loan amount, term, and purpose.",
        "why_required": "The deal analysis mentions '
All JSON parse attempts failed. Last error: Expecting ',' delimiter: line 9 column 54 (char 300). JSON string (first 300 chars): [
  {
    "category": "Loan Purpose Information",
    "fields": [
      {
        "id": 1,
        "name": "Final Loan Request Letter",
        "description": "Formal request from the borrower detailing the final loan amount, term, and purpose.",
        "why_required": "The deal analysis mentions '
Could not parse JSON from LLM output (10151 chars). First 500 chars:
<json_output>
[
  {
    "category": "Loan Purpose Information",
    "fields": [
      {
        "id": 1,
        "name": "Final Loan Request Letter",
        "description": "Formal request from the borrower detailing the final loan amount, term, and purpose.",
        "why_required": "The deal analysis mentions 'ca. â‚¬39MM' and 'minimum term of 5 years'. This document is needed to confirm the final, precise terms of the request. It directly addresses Procedure requirement (i) 'Information on the
[...]
Last 200 chars:
 We must ensure that this new loan will not cause a breach of any existing covenants the fund has, particularly regarding leverage.",
        "priority": "IMPORTANT",
        "typical_source": "Borrow
All JSON parse attempts failed. Last error: Expecting ',' delimiter: line 34 column 958 (char 4217). JSON string (first 300 chars): [
  {
    "id": 1,
    "value": "The loan is for the financing of the acquisition of Polderzicht Retailpark.",
    "source_quote": "DRZ Real Estate is requesting an up to 50% LTV senior loan (ca. â‚¬39MM) for the financing of the acquisition, for a minimum term of 5 years"
  },
  {
    "id": 3,
    "v
All JSON parse attempts failed. Last error: Expecting ',' delimiter: line 9 column 199 (char 633). JSON string (first 300 chars): [
  {
    "name": "Decision Sheet",
    "description": "Executive summary for the Project Vesting deal. Recommends approval for the ~â‚¬39M senior loan to OPPF for the Polderzicht Retailpark acquisition. Highlights key metrics (50% LTV, 11.5% DY), strong sponsorship by DRZ Real Estate, and the prime a
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  C:\Users\GV20FI\AppData\Roaming\Python\Python312\site-packages\streamlit\runtime\scr
  iptrunner\exec_code.py:129 in exec_func_with_error_handling

  C:\Users\GV20FI\AppData\Roaming\Python\Python312\site-packages\streamlit\runtime\scr
  iptrunner\script_runner.py:672 in code_to_exec

  C:\Users\GV20FI\Documents\Mode Development\AI in WB lending process\Project
  Omni\WBLA-main_v3\ui\app.py:1832 in <module>

    1829
    1830
    1831 if __name__ == "__main__":
  â± 1832 â”‚   main()
    1833

  C:\Users\GV20FI\Documents\Mode Development\AI in WB lending process\Project
  Omni\WBLA-main_v3\ui\app.py:1826 in main

    1823 â”‚   elif phase == "DRAFTING":
    1824 â”‚   â”‚   render_phase_drafting()
    1825 â”‚   elif phase == "COMPLETE":
  â± 1826 â”‚   â”‚   render_phase_complete()
    1827 â”‚   else:
    1828 â”‚   â”‚   render_phase_setup()
    1829

  C:\Users\GV20FI\Documents\Mode Development\AI in WB lending process\Project
  Omni\WBLA-main_v3\ui\app.py:1773 in render_phase_complete

    1770 â”‚   â”‚   else:
    1771 â”‚   â”‚   â”‚   if st.button("ğŸ“‹ Generate Audit Trail", use_container_width=True)
    1772 â”‚   â”‚   â”‚   â”‚   with st.spinner("Generating audit trail..."):
  â± 1773 â”‚   â”‚   â”‚   â”‚   â”‚   path = generate_audit_trail(dict(st.session_state), get_t
    1774 â”‚   â”‚   â”‚   â”‚   â”‚   if path:
    1775 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   st.session_state["_audit_path"] = path
    1776 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   st.rerun()

  C:\Users\GV20FI\Documents\Mode Development\AI in WB lending process\Project
  Omni\WBLA-main_v3\core\export.py:437 in generate_audit_trail

    434 â”‚   output_path = output_dir / filename
    435 â”‚
    436 â”‚   with open(output_path, "w") as f:
  â± 437 â”‚   â”‚   f.write("\n".join(lines))
    438 â”‚
    439 â”‚   logger.info("Audit trail saved: %s", output_path)
    440 â”‚   return str(output_path)

  C:\Program Files\Python312\Lib\encodings\cp1252.py:19 in encode

     16
     17 class IncrementalEncoder(codecs.IncrementalEncoder):
     18 â”‚   def encode(self, input, final=False):
  â±  19 â”‚   â”‚   return codecs.charmap_encode(input,self.errors,encoding_table)[0]
     20
     21 class IncrementalDecoder(codecs.IncrementalDecoder):
     22 â”‚   def decode(self, input, final=False):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
UnicodeEncodeError: 'charmap' codec can't encode characters in position 219-268:
character maps to <undefined>
